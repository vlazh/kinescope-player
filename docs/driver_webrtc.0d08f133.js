"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[443],{3553:function(e,t,n){n.d(t,{I:function(){return c}});var r=n(55510),i=n.n(r),o=n(52178);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}function a(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}class c extends o.I{isIdleMode(){return this.idleMedia===this.media}constructor(e,t){super(t),this.driver=e,this.idleMedia=(()=>{var e=document.createElement("video");return e.preload="metadata",e})(),this.idleOptions={quality:void 0,initialTime:void 0,autoPlay:!1,driverSettings:{hls:{startLevel:0,initialLiveManifestSize:0,liveSyncDurationCount:0,lowLatencyMode:!1}}},this.on(o.I.Events.LiveStateChanged,(t=>{var{data:n}=t;e.isSourceChanging()||e.emit(e.Events.LiveStateChanged,n)})).on(o.I.Events.QualityChanged,(t=>{var{data:n}=t;this.isIdleMode()||e.isSourceChanging()||e.emit(e.Events.QualityChanged,n)})).on(o.I.Events.AudioTrackChanged,(t=>{var{data:n}=t;this.isIdleMode()||e.isSourceChanging()||e.emit(e.Events.AudioTrackChanged,n)}))}load(e){var t,n=()=>super.load,r=this;return(t=function*(){var t=r.isIdleMode()?s({},e,r.idleOptions,{driverSettings:t=>function(e,t,n){var r="function"==typeof t?t(e):t,o="function"==typeof n?n(e):n;return i()(null!=r?r:{},null!=o?o:{})}(t,e.driverSettings,r.idleOptions.driverSettings)}):e;return n().call(r,t)},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))})()}}},9624:function(e,t,n){n.d(t,{B:function(){return C}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var s=function(e,t){this.target=t,this.type=e},a=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return i(t,e),t}(s),c=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var i=e.call(this,"close",r)||this;return i.wasClean=!0,i.code=t,i.reason=n,i}return i(t,e),t}(s),d=function(){if("undefined"!=typeof WebSocket)return WebSocket},l={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},u=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?l.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?l.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var i=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),o=i.next();!o.done;o=i.next()){var s=o.value;this._callEventListener(e,s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?l.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,i=void 0===r?l.minReconnectionDelay:r,o=e.maxReconnectionDelay,s=void 0===o?l.maxReconnectionDelay:o,a=0;return this._retryCount>0&&(a=i*Math.pow(n,this._retryCount-1))>s&&(a=s),this._debug("next delay",a),a},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?l.maxRetries:n,i=t.connectionTimeout,o=void 0===i?l.connectionTimeout:i,s=t.WebSocket,a=void 0===s?d():s;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=a)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new a(t,e._protocols):new a(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),o))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new a(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new c(e,t,this))}catch(n){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();const h=u;var p,f=n(58245),m=n(69805),v=n(90668),g=["logger","protocols","binaryType","idleTimeout","halfOpenDetection","startClosed"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}class C extends f.b{get Events(){return C.Events}constructor(e,t){super(),this.logger=void 0,this.ws=void 0,this.listener=void 0,this.reconnectOnIdle=void 0,this.halfOpen=void 0;var n=null!=t?t:{},{logger:r,protocols:i,binaryType:o,idleTimeout:s,halfOpenDetection:a,startClosed:c}=n,d=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(n,g);this.logger=null!=r?r:console,this.ws=new h(e,i,y({},d,{startClosed:!0})),null!=o&&(this.ws.binaryType=o),this.listener=new v.H(this.ws),s&&s>0&&(this.reconnectOnIdle=(0,m.N)((()=>{this.logger.info("WS connection reconnecting after "+s+"ms due to inactivity."),this.ws.reconnect()}),s)),this.halfOpen=(()=>{if(a){var{pingTimeout:e=12e3,outMessage:t=()=>JSON.stringify({type:"pong"}),inMessageFilter:n=e=>e&&"object"==typeof e&&"ping"===e.type}=a,r=(0,m.N)((()=>{this.logger.info("WS connection reconnecting after "+e+"ms due to the probability of a half-open connection."),this.ws.reconnect()}),e),i=()=>{r(),this.ws.send("function"!=typeof t||t instanceof Blob?t:t())};return{heartbeat:i,cancel:()=>r.cancel(),onMessage:e=>{var{data:t}=e;n(t)?i():r()}}}})(),this.listener.on("open",(()=>{var e;this.reconnectOnIdle&&this.reconnectOnIdle(),null!=(e=this.halfOpen)&&e.heartbeat(),this.emit(this.Events.Connected)})).on("close",(e=>{var n,r,{code:i}=e;null!=(n=this.reconnectOnIdle)&&n.cancel(),null!=(r=this.halfOpen)&&r.cancel(),null!=(null==t?void 0:t.maxRetries)&&this.ws.readyState===this.ws.CLOSED&&this.ws.retryCount===t.maxRetries&&this.close(i,"Failed to connect after "+t.maxRetries+" attempts.")})).on("message",(e=>{var t;this.reconnectOnIdle&&this.reconnectOnIdle(),null!=(t=this.halfOpen)&&t.onMessage(e),this.emit(this.Events.Message,e)})).on("error",(e=>{var{error:t,message:n}=e;this.emit(this.Events.Error,{error:t,message:n})})),this.halfOpen&&(this.isConnected()||this.ws.readyState===this.ws.CONNECTING)&&this.halfOpen.heartbeat(),c||this.connect()}isConnected(){return this.ws.readyState===this.ws.OPEN}getUrl(){return this.ws.url}connect(){this.ws.reconnect()}send(e){if(!this.ws)throw new Error("The object is not connected yet.");this.ws.send(e)}close(e,t){var n=!!this.ws;try{this.reconnectOnIdle&&this.reconnectOnIdle.cancel(),this.halfOpen&&this.halfOpen.cancel(),this.ws.close(e,t)}catch(e){this.logger.warn(e)}n&&this.emit(this.Events.Closed,t?{reason:t}:void 0)}destroy(){this.close(),this.listener.removeAllListeners(),this.removeAllListeners()}[Symbol.dispose](){this.destroy()}}(function(e){e.Connected="Connected",e.Message="Message",e.Error="Error",e.Closed="Closed"})((p=C||(C={})).Events||(p.Events={}))},16546:function(e,t,n){n.r(t),n.d(t,{default:function(){return tt}});var r={};n.r(r),n.d(r,{fixNegotiationNeeded:function(){return k},shimAddTrackRemoveTrack:function(){return E},shimAddTrackRemoveTrackWithNative:function(){return P},shimGetSendersWithDtmf:function(){return R},shimGetUserMedia:function(){return S},shimMediaStream:function(){return T},shimOnTrack:function(){return b},shimPeerConnection:function(){return w},shimSenderReceiverGetStats:function(){return _}});var i={};n.r(i),n.d(i,{shimAddTransceiver:function(){return N},shimCreateAnswer:function(){return V},shimCreateOffer:function(){return W},shimGetDisplayMedia:function(){return D},shimGetParameters:function(){return F},shimGetUserMedia:function(){return O},shimOnTrack:function(){return L},shimPeerConnection:function(){return x},shimRTCDataChannel:function(){return A},shimReceiverGetStats:function(){return I},shimRemoveStream:function(){return j},shimSenderGetStats:function(){return M}});var o={};n.r(o),n.d(o,{shimAudioContext:function(){return K},shimCallbacksAPI:function(){return Q},shimConstraints:function(){return B},shimCreateOfferLegacy:function(){return J},shimGetUserMedia:function(){return G},shimLocalStreamsAPI:function(){return U},shimRTCIceServerUrls:function(){return q},shimRemoteStreamsAPI:function(){return z},shimTrackEventTransceiver:function(){return H}});var s={};n.r(s),n.d(s,{removeExtmapAllowMixed:function(){return re},shimAddIceCandidateNullOrEmpty:function(){return ie},shimConnectionState:function(){return ne},shimMaxMessageSize:function(){return ee},shimParameterlessSetLocalDescription:function(){return oe},shimRTCIceCandidate:function(){return Y},shimRTCIceCandidateRelayProtocol:function(){return Z},shimSendThrowTypeError:function(){return te}});let a=!0,c=!0;function d(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function l(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function u(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(a=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"==typeof window){if(a)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function f(e,t){c&&console.warn(e+" is deprecated, please use "+t+" instead.")}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e){return m(e)?Object.keys(e).reduce((function(t,n){const r=m(e[n]),i=r?v(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function g(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?g(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{g(e,e.get(t),n)}))})))}function y(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&g(e,n,i)}))})),i}const C=p;function S(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),C("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return C("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function T(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function b(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else l(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function R(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>y(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),l(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>y(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function P(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function E(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return P(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function w(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function k(e,t){l(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function O(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){f("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function D(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function L(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function x(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(ve){if("TypeError"!==ve.name)throw ve;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function M(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function I(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),l(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function j(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){f("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function A(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function N(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function F(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function W(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function V(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function U(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function z(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Q(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function G(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(B(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function B(e){return e&&void 0!==e.video?Object.assign({},e,{video:v(e.video)}):e}function q(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(f("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function H(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function J(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function K(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var X=n(18585),$=n.n(X);function Y(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=$().parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,l(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Z(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||l(e,"icecandidate",(e=>{if(e.candidate){const t=$().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function ee(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=$().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=$().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=$().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function te(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},l(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function ne(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function re(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function ie(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function oe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=p,a=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find((e=>"Chromium"===e.brand));if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=d(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=d(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=d(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),c={browserDetails:a,commonShim:s,extractVersion:d,disableLog:u,disableWarnings:h,sdp:X};switch(a.browser){case"chrome":if(!r||!w||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),c;if(null===a.version)return n("Chrome shim can not determine version, not shimming."),c;n("adapter.js shimming chrome."),c.browserShim=r,ie(e,a),oe(e),S(e,a),T(e),w(e,a),b(e),E(e,a),R(e),_(e),k(e,a),Y(e),Z(e),ne(e),ee(e,a),te(e),re(e,a);break;case"firefox":if(!i||!x||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),c;n("adapter.js shimming firefox."),c.browserShim=i,ie(e,a),oe(e),O(e,a),x(e,a),L(e),j(e),M(e),I(e),A(e),N(e),F(e),W(e),V(e),Y(e),ne(e),ee(e,a),te(e);break;case"safari":if(!o||!t.shimSafari)return n("Safari shim is not included in this adapter release."),c;n("adapter.js shimming safari."),c.browserShim=o,ie(e,a),oe(e),q(e),J(e),Q(e),U(e),z(e),H(e),G(e),K(e),Y(e),Z(e),ee(e,a),te(e),re(e,a);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var se=n(55510),ae=n.n(se),ce=n(69805),de=n(54548),le=n(44022),ue=n(64917),he=n(35185),pe=n(45006);function fe(e,t){e.removeTrack(t),e.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:t}))}class me{constructor(e){this.mediaStream=void 0,this.media=void 0,this.mediaStream=e}attach(e){this.media=e,function(e,t){t&&t.active&&e.muted&&0===t.getVideoTracks().filter((e=>!e.getSettings().displaySurface)).length?e.srcObject=null:e.srcObject=t&&t.active?t:null}(e,this.mediaStream)}detach(){if(this.media){var{media:e}=this;this.media=void 0,(0,pe.a)(e)}}updateStream(e){if(this.mediaStream!==e){var{media:t}=this;this.mediaStream=e,t&&this.attach(t)}}removeTrack(e){fe(this.mediaStream,e)}addTrack(e,t){!function(e,t,n){e.addTrack(t),e.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:t})),t.addEventListener("ended",(()=>{fe(e,t),n&&n()}),{once:!0})}(this.mediaStream,e,(()=>{this.removeTrack(e),t&&t()}))}reset(){this.mediaStream.getTracks().forEach((e=>{e.stop(),this.removeTrack(e)}))}destroy(){this.detach(),this.reset()}[Symbol.dispose](){this.destroy()}}var ve,ge=n(9624),ye=n(58245),Ce=n(9374),Se=n(37400),Te=n(39730);function be(e){if(e.endsWith("\n")&&(e=e.substring(0,e.length-1)),window.performance){var t=(window.performance.now()/1e3).toFixed(3);console.log(t+": "+e)}else console.log(e)}function Re(e,t,n){var r=e.split("\r\n"),i=Me(r,"m=",n);if(-1===i)return be("Failed to add bandwidth line to sdp, as no m-line found"),e;var o=Ie(r,i+1,-1,"m=");-1===o&&(o=r.length);var s=Ie(r,i+1,o,"c=");if(-1===s)return be("Failed to add bandwidth line to sdp, as no c-line found"),e;var a=Ie(r,s+1,o,"b=AS");a>=0&&r.splice(a,1);var c="b=AS:"+t;return r.splice(s+1,0,c),r.join("\r\n")}function _e(e,t){for(var n=e.split(" "),r=0;r<n.length;++r)n[r]===t.toString()&&n.splice(r,1);return n.join(" ")}function Pe(e,t){var n=Me(e,"a=rtpmap",t.toString());if(-1===n)return e;e.splice(n,1);var r=Me(e,"m=","video");return-1===r||(e[r]=_e(e[r],t)),e}function Ee(e,t){if("false"!==t.videoFec)return e;var n=e.split("\r\n"),r=Me(n,"a=rtpmap","red");if(-1===r)return e;var i=Ae(n[r]);if(n=function(e,t){var n=Me(e,"a=rtpmap",t);if(-1===n)return e;var r=Ae(e[n]);e.splice(n,1);var i=Me(e,"m=","video");return-1===i||(e[i]=_e(e[i],r)),e}(n=Pe(n,i),"ulpfec"),-1===(r=Me(n,"a=fmtp",i.toString())))return e;var o=De(n[r]).pt;return null==o?e:(n.splice(r,1),(n=Pe(n,o)).join("\r\n"))}function we(e,t,n,r){if(!r)return e;var i=e.split("\r\n"),o=Me(i,"m=",t);if(-1===o)return e;var s=je(i,r);return s&&(i[o]=function(e,t){var n=e.split(" "),r=n.slice(0,3);r.push(t);for(var i=3;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r.join(" ")}(i[o],s)),i.join("\r\n")}function ke(e,t,n,r){var i=e.split("\r\n"),o=xe(i,t);if(null===o){var s=Me(i,"a=rtpmap",t);if(-1===s)return e;var a={pt:Ae(i[s]).toString(),params:{[n]:r}};i.splice(s+1,0,Le(a))}else{var c=De(i[o]);c.params[n]=r,i[o]=Le(c)}return i.join("\r\n")}function Oe(e,t,n){var r=e.split("\r\n"),i=xe(r,t);if(null===i)return e;var o=De(r[i]);if(o){delete o.params[n];var s=Le(o);null===s?r.splice(i,1):r[i]=s}return r.join("\r\n")}function De(e){var t={},n=e.indexOf(" "),r=e.substring(n+1).split("; "),i=/a=fmtp:(\d+)/.exec(e);i&&2===i.length&&(t.pt=i[1]);var o={};return r.forEach((e=>{var t=e.split("=");2===t.length&&(o[t[0]]=t[1])})),t.params=o,t}function Le(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return"";var{pt:t="",params:n={}}=e,r=Object.entries(n).map((e=>{var[t,n]=e;return t+"="+n}));return 0===r.length?"":"a=fmtp:"+t.toString()+" "+r.join("; ")}function xe(e,t){var n=je(e,t);return n?Me(e,"a=fmtp:"+n.toString()):null}function Me(e,t,n){return Ie(e,0,-1,t,n)}function Ie(e,t,n,r,i){for(var o=-1!==n?n:e.length,s=t;s<o;++s)if(e[s].startsWith(r)&&(!i||e[s].toLowerCase().includes(i.toLowerCase())))return s;return-1}function je(e,t){var n=Me(e,"a=rtpmap",t);return n>=0?Ae(e[n]):null}function Ae(e){var t=/a=rtpmap:(\d+) [a-zA-Z0-9-]+\/\d+/.exec(e);return t&&2===t.length?t[1]:""}function Ne(e,t){void 0===t&&(t={});var n=function(e,t){return we(e,"audio",0,t.audioRecvCodec)}(e.sdp||"",t);return n=function(e,t){return we(e,"video",0,t.videoRecvCodec)}(n,t),n=function(e,t){return t.audioRecvBitrate?(be("Prefer audio receive bitrate: "+t.audioRecvBitrate),Re(e,t.audioRecvBitrate,"audio")):e}(n,t),n=function(e,t){return t.videoRecvBitrate?(be("Prefer video receive bitrate: "+t.videoRecvBitrate),Re(e,t.videoRecvBitrate,"video")):e}(n,t),{sdp:n=Ee(n,t),type:e.type}}function Fe(e,t){void 0===t&&(t={});var n=function(e,t){return"true"===t.opusStereo?e=ke(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=Oe(e,"opus/48000","stereo")),"true"===t.opusFec?e=ke(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=Oe(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=ke(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=Oe(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=ke(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e}(e.sdp||"",t);return n=function(e,t){return we(e,"audio",0,t.audioSendCodec)}(n,t),n=function(e,t){return we(e,"video",0,t.videoSendCodec)}(n,t),n=function(e,t){return t.audioSendBitrate?(be("Prefer audio send bitrate: "+t.audioSendBitrate),Re(e,t.audioSendBitrate,"audio")):e}(n,t),n=function(e,t){return t.videoSendBitrate?(be("Prefer video send bitrate: "+t.videoSendBitrate),Re(e,t.videoSendBitrate,"video")):e}(n,t),n=function(e,t){var n=t.videoSendInitialBitrate;if(!n)return e;var r=n,i=t.videoSendBitrate;if(i&&(n>i&&(be("Clamping initial bitrate to max bitrate of "+i+" kbps."),n=i,t.videoSendInitialBitrate=n),r=i),-1===Me(e.split("\r\n"),"m=","video"))return be("Failed to find video m-line"),e;var o=t.videoRecvCodec||"";return e=ke(e,o,"x-google-min-bitrate",t.videoSendInitialBitrate||""),ke(e,o,"x-google-max-bitrate",r.toString())}(n,t),{sdp:n=Ee(n,t),type:e.type}}function We(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){We(o,r,i,s,a,"next",e)}function a(e){We(o,r,i,s,a,"throw",e)}s(void 0)}))}}class Ue extends ye.b{get Events(){return Ue.Events}constructor(e){var t;void 0===e&&(e={}),super(),this.options=void 0,this.logger=void 0,this.pc=void 0,this.options=e,this.logger=null!=(t=e.logger)?t:Te.A.getLogger("PeerConnection"),this.pc=this.createPC()}clear(){this.pc.onsignalingstatechange=null,this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.ontrack=null,this.pc.onnegotiationneeded=null,this.pc.onicecandidate=null,this.pc.onicecandidateerror=null}createPC(){var e=new RTCPeerConnection(this.options.rtc);return e.onsignalingstatechange=()=>{this.logger.debug("Signaling state changed to: "+e.signalingState),"closed"===e.signalingState&&(this.emit(this.Events.Closed),this.clear())},(0,Se.k)(RTCPeerConnection.prototype,"onconnectionstatechange")?e.onconnectionstatechange=()=>{this.logger.debug("Connection state changed to: "+e.connectionState),"connected"===e.connectionState?this.emit(this.Events.Connected):"disconnected"===e.connectionState&&this.emit(this.Events.Disconnected)}:e.oniceconnectionstatechange=()=>{this.logger.debug("ICE connection state changed to: "+e.iceConnectionState),"connected"===e.iceConnectionState?this.emit(this.Events.Connected):"disconnected"===e.iceConnectionState&&this.emit(this.Events.Disconnected)},e.ontrack=e=>{var{streams:t,track:n}=e;if(this.logger.debug("Remote stream received.",t.length,n.kind),0!==t.length){var[r]=t;r.onremovetrack=()=>{this.logger.debug("onremovetrack"),this.emit(this.Events.RemoteStreamChanged,r)},r.onaddtrack=()=>{this.logger.debug("onaddtrack"),this.emit(this.Events.RemoteStreamChanged,r)},this.emit(this.Events.RemoteStreamChanged,r)}},e.onnegotiationneeded=()=>{var{iceConnectionState:t}=e;"connected"!==t&&"completed"!==t||(this.logger.debug("Reinitializing connection..."),this.emit(this.Events.ReinitializingConnectionRequired))},e.onicecandidate=e=>{var{candidate:t}=e;t?function(e,t){var{candidate:n}=e;return!(!n||n.includes("tcp")||t&&"relay"===t.iceTransportPolicy&&"relay"!==function(e){return e.split(" ")[7]}(n))}(t)&&this.emit(this.Events.LocalIceCandidate,t):this.emit(this.Events.EndOfIceCandidates)},e.onicecandidateerror=e=>{if(e instanceof RTCPeerConnectionIceErrorEvent){var{errorCode:t,errorText:n,hostCandidate:r,url:i}=e;this.logger.warn("ICE candidate error: errorCode="+t+", errorText="+n+", hostCandidate="+r+", url="+i)}else this.logger.warn("ICE candidate error: "+(0,Ce.u)(e))},e}setLocalDescription(e,t){var n=this;return Ve((function*(){var r=Ne(t,n.options.codecs);return yield e.setLocalDescription(r),r}))()}setRemoteDescription(e,t){var n=this;return Ve((function*(){var r=Fe(t,n.options.codecs);return yield e.setRemoteDescription(r),r}))()}isConnected(){return"connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState}isClosed(){return"closed"===this.pc.signalingState}addIceCandidate(e){return this.pc.addIceCandidate(e)}attachStream(e){var t=this.pc.getSenders(),n=t.length?e.getTracks().filter((e=>!t.find((t=>{var{track:n}=t;return!!n&&n.id===e.id})))):e.getTracks();n.length?(n.forEach((t=>this.pc.addTrack(t,e))),this.logger.debug("Attached "+n.length+" track(s) to a peer connection.")):this.logger.debug("No tracks to attach to a peer connection.")}reattachStream(e){var t=this.pc.iceConnectionState;if("new"===t||"connected"===t||"completed"===t){var n=e?e.getTracks():[];this.pc.getSenders().forEach((e=>{var{track:t}=e;!t||"ended"!==t.readyState&&n.find((e=>e.id===t.id))||(this.pc.removeTrack(e),this.logger.debug("'"+(t&&t.kind)+"' track is removed from a peer connection."))})),e&&this.attachStream(e)}}createOffer(){var e=this;return Ve((function*(){var t=yield e.pc.createOffer(e.options.offerOptions);return e.setLocalDescription(e.pc,t)}))()}createAnswer(e){var t=this;return Ve((function*(){yield t.setRemoteDescription(t.pc,e);var n=yield t.pc.createAnswer(t.options.offerOptions);return t.setLocalDescription(t.pc,n)}))()}applyAnswer(e){return this.setRemoteDescription(this.pc,e)}reconnect(){this.close(),this.pc=this.createPC()}close(){this.pc.close(),this.pc.onsignalingstatechange&&(this.emit(this.Events.Closed),this.clear())}destroy(){this.close(),this.removeAllListeners()}[Symbol.dispose](){this.destroy()}}(function(e){e.LocalIceCandidate="LocalIceCandidate",e.EndOfIceCandidates="EndOfIceCandidates",e.Connected="Connected",e.Disconnected="Disconnected",e.RemoteStreamChanged="RemoteStreamChanged",e.ReinitializingConnectionRequired="ReinitializingConnectionRequired",e.Closed="Closed"})((ve=Ue||(Ue={})).Events||(ve.Events={}));var ze=n(41746),Qe=n(77687),Ge=n(15779),Be=n(88913),qe=n(38105),He=n(3553),Je=n(30732),Ke=n(39104),Xe=["drm","ws","dvr"];function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(null,arguments)}function Ye(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){Ye(o,r,i,s,a,"next",e)}function a(e){Ye(o,r,i,s,a,"throw",e)}s(void 0)}))}}var et={offerOptions:{offerToReceiveVideo:!0,offerToReceiveAudio:!0},rtc:{iceServers:[{urls:["stun:stun.l.google.com:19302"]}],bundlePolicy:"max-compat"},codecs:{}};class tt extends qe.n{constructor(e){void 0===e&&(e=void 0),super("webrtc","WebRtcDriver",e),this.playback="driver",this.currentDriver=!0,this.sendState=(()=>{var e=e=>{if(this.sendState.invoked=!1,this.sendState.delayed.cancel(),this.wsController){var t=this.getState(e);t?this.wsController.send(JSON.stringify({method:"user_state",payload:t})):this.emitStateError("sendState")}};return e.delayed=(0,de.G)((0,ce.N)(e,3e3),(()=>{this.sendState.invoked=!0})),e.invoked=!1,e})()}getState(e){var t,n;if(this.wsController&&this.media){var r=null!=this.currentQuality?null==(t=this.qualityLevels)||null==(t=t[this.currentQuality])?void 0:t.id:void 0,i=null!=this.currentAudio?null==(n=this.audioTracks)||null==(n=n[this.currentAudio])?void 0:n.id:void 0;return{paused:null!=e?e:this.media.paused,video_track_id:r,audio_track_id:i}}}emitStateError(e){this.handleError(new Error("The current state (user_state) is undefined."),{severity:"warning",path:e})}sendOffer(e){var t=this;return Ze((function*(){if(t.pc&&t.wsController){var n=t.getState(e);if(n){var r=yield t.pc.createOffer();t.wsController.send(JSON.stringify({method:"offer",payload:{sdp:r,user_state:n}}))}else t.emitStateError("sendOffer")}}))()}seek(e){var t=()=>super.atLiveEdge,n=()=>super.seek,r=this;return Ze((function*(){var i,o,{attachSources:s,seekVideoController:a}=r;return s&&r.isPlayed()&&a&&(r.currentDriver||t().call(r,e))?r.isSourceChanging()?r.getMediaElement().currentTime:Je.j(r,{isIdleMode:()=>r.currentDriver,onStart:()=>r.setSourceChanging(!0),onEnd:()=>r.setSourceChanging(!1),onError:(e,t)=>r.handleError(e,{severity:t,path:"dvrSeeking"}),onDvrSeek:(o=Ze((function*(t){var n,i,o;r.currentDriver=!1,r.sendState.delayed.cancel(),null!=(n=r.wsController)&&n.close(),null!=(i=r.pc)&&i.close(),yield a.reattach(t,{quality:r.currentQuality,initialTime:e,driverSettings:null==(o=r.attachOptions)||null==(o=o.settings)||null==(o=o.dvr)?void 0:o.driverSettings})})),function(e){return o.apply(this,arguments)}),onNormalSeek:(i=Ze((function*(e){r.currentDriver=!0,yield a.detach().catch((e=>r.handleError(e,{severity:"warning",path:"dvrSeeking"}))),yield r.attachCore(e,s,$e({},r.attachOptions,{quality:r.currentQuality,audioTrack:r.currentAudio}))})),function(e){return i.apply(this,arguments)})}):n().call(r,e)}))()}connect(e,t,n,r){var i=this;return Ze((function*(){var o,s=i.getMediaElement(),a=(0,he.e)(s,"waitsrc"),c=(0,le.s)();if(t.isClosed()&&t.reconnect(),n.connect(),null!=(o=e.dvr)&&o.sources&&!(0,ue.R)(e.dvr.sources)){var d;if(!i.seekVideoController){var l=new He.I(i,{logger:i.logger});i.seekVideoController=l}i.seekVideoController.attach(i.seekVideoController.idleMedia,$e({},e.dvr,{live:{setInitialTime:!0},driverSettings:null==(d=i.attachOptions)||null==(d=d.settings)||null==(d=d.dvr)?void 0:d.driverSettings})).catch((e=>i.handleError(e,{severity:"warning",path:"connect"}))).finally((()=>c.resolve()))}else c.resolve();yield a.wait(),yield c.wait(),r.attach(s),yield i.sendOffer(!1)}))()}attachCore(e,t,n){var r=this;return Ze((function*(){try{var i,o,s,a=null!=(i=n.settings)?i:{},{drm:c,ws:d}=a,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(a,Xe),{quality:u,audioTrack:h,sourceParams:p}=n,f=p?(0,ze.u)(t.src,p):t.src,m=null!=c&&c.auth?$e({},t,{src:(yield c.auth(f))||f}):$e({},t,{src:f});if(r.pc&&r.wsController&&r.msController)return void(yield r.connect(m,r.pc,r.wsController,r.msController));r.setLive(!0);var v=r.eventListeners.scope(e,"attachcore").removeAllListeners().on("error",(e=>r.handleError(e))).on("play",(()=>r.currentDriver&&r.sendState())).on("pause",(()=>r.currentDriver&&r.sendState.delayed())).once("loadedmetadata",(()=>{var{qualityLevels:t={},audioTracks:n={}}=r;r.emit(r.Events.MetadataChanged,{qualityLevels:t,audioTracks:n,masterSource:m.src}),v.on("canplay",(()=>{!e.paused||r.sendState.delayed.isPending||r.sendState.invoked||r.sendState.delayed()})).once("canplay",(()=>{null!=r.currentQuality&&r.qualityLevels&&r.emit(r.Events.Loaded,{quality:r.currentQuality,qualityLevels:t,audioTracks:n,audioTrack:r.currentAudio,masterSource:m.src,liveState:r.getLiveState(),drm:!1})}))}));r.pc=new Ue($e({},l,{logger:r.logger})),r.msController=new me(new MediaStream);var{pc:g,msController:y}=r;g.on(g.Events.LocalIceCandidate,(e=>{var{data:t}=e;T.send(JSON.stringify({method:"ice_candidate",payload:t}))})).on(g.Events.Closed,(()=>{r.currentDriver&&!r.isSourceChanging()&&r.attach(e,t,n)})).on(g.Events.RemoteStreamChanged,(e=>{var{data:t}=e;y.updateStream(t)})).on(g.Events.ReinitializingConnectionRequired,(()=>{r.sendOffer()}));var C=()=>{e.dispatchEvent(new Event("waitsrc"))},S=m.signalingUrl||m.src,T=new ge.B(S,$e({startClosed:!0,logger:r.logger},d,{maxRetries:null!=(o=null==d?void 0:d.maxRetries)?o:3,idleTimeout:null!=(s=null==d?void 0:d.idleTimeout)?s:3e4})).on(ge.B.Events.Closed,(e=>{var{data:t}=e;(null==t?void 0:t.reason)&&r.handleError(new Error(t.reason||"WS connection closed unexpectedly."),{type:"network",path:"ws:"+S})})).on(ge.B.Events.Message,function(){var t=Ze((function*(t){var{data:{data:n}}=t;try{var i=JSON.parse(n);if("meta_response"===i.method){if(r.qualityLevels)return void(e.srcObject?r.sendState(r.isLoaded()&&void 0):C());try{var{qualityLevels:o,audioTracks:s}=(0,Ke.N)(i.payload);r.qualityLevels=o,r.audioTracks=s}catch(e){return void r.handleError(e,{path:"ws:parseManifest:"+S})}var a="function"==typeof u?u(r.qualityLevels):u,[c]=(0,Qe.t)(r.qualityLevels,a,!0,void 0),d="function"==typeof h?h(r.audioTracks):h,l=!1===d?void 0:(0,Ge.j)(r.audioTracks,d,{tryDefault:!0,tryFirst:!0});r.currentQuality=c,r.currentAudio=null==l?void 0:l.language,C()}else if("ice_candidate"===i.method)yield g.addIceCandidate(i.payload);else if("answer"===i.method)yield g.applyAnswer(i.payload);else if("offer"===i.method){var p=r.getState();if(!p)return void r.emitStateError("createAnswer");var f=yield g.createAnswer(i.payload);T.send(JSON.stringify({method:"answer",payload:{sdp:f,user_state:p}}))}}catch(e){r.handleError(e,{severity:"warning",path:"ws:message:"+S})}}));return function(e){return t.apply(this,arguments)}}());r.wsController=T,yield r.connect(m,r.pc,r.wsController,r.msController)}catch(e){throw new Be.X(t.src,{cause:e})}}))()}attach(e,t,n){var r=()=>super.attach,i=this;return Ze((function*(){var o,s=ae()(et,null!=(o=n.settings)?o:{},{arrayMerge:(e,t)=>t}),a=$e({},n,{settings:s});yield r().call(i,e,t,a)}))()}detachCore(){var e=this;return Ze((function*(){e.pc&&(e.pc.removeAllListeners(),e.pc.destroy(),e.pc=void 0),e.wsController&&(e.wsController.destroy(),e.wsController=void 0),e.msController&&(e.msController.destroy(),e.msController=void 0),e.seekVideoController&&(yield e.seekVideoController.detach(),e.seekVideoController.removeAllListeners(),e.seekVideoController=void 0),e.qualityLevels=void 0,e.audioTracks=void 0,e.currentQuality=void 0,e.currentAudio=void 0,e.currentDriver=!0}))()}getCurrentTime(){var e,t;return this.currentDriver?this.getDuration():null!=(e=null==(t=this.seekVideoController)?void 0:t.getCurrentTime())?e:super.getCurrentTime()}getDuration(){var e;return null!=(e=this.seekVideoController)&&e.isLoaded()?this.seekVideoController.getDuration():super.getDuration()}getLiveLatency(){var e;return null!=(e=this.seekVideoController)&&e.isLoaded()?this.seekVideoController.getLiveState().latency:super.getLiveLatency()}getLiveSeekLength(){var e;return null!=(e=this.seekVideoController)&&e.isLoaded()?this.seekVideoController.getLiveState().seekLength:0}getLiveEdgePosition(){var e;return this.isPlayed()&&null!=(e=this.seekVideoController)&&e.isLoaded()?this.seekVideoController.getLiveState().edgePosition:super.getLiveEdgePosition()}atLiveEdge(){return this.currentDriver}getVideoQuality(){return this.currentQuality}isValidVideoQuality(e){var t;return"auto"!==e&&null!=(null==(t=this.qualityLevels)||null==(t=t[e])?void 0:t.id)}setVideoQuality(e){var t,n;if(e!==this.currentQuality){var{wsController:r,qualityLevels:i}=this;if(r&&i&&this.isValidVideoQuality(e)&&!this.isSourceChanging())null!=(null==(t=i[e])?void 0:t.id)&&(this.currentQuality=e,this.currentDriver?this.sendState():null==(n=this.seekVideoController)||n.setVideoQuality(e),this.emit(this.Events.QualityChanged,{quality:e,auto:!1}))}}getAudioTrack(){return this.currentAudio}isValidAudioTrack(e){var t;return null!=(null==(t=this.audioTracks)||null==(t=t[e])?void 0:t.id)}setAudioTrack(e){var t,n;if(e!==this.currentAudio){var{wsController:r,audioTracks:i}=this;if(r&&i&&this.isValidAudioTrack(e))null!=(null==(t=i[e])?void 0:t.id)&&(this.currentAudio=e,this.currentDriver?this.sendState():null==(n=this.seekVideoController)||n.setAudioTrack(e),this.emit(this.Events.AudioTrackChanged,{lang:e}))}}setMaxQuality(){}setMaxAbrQuality(){}destroyCore(){}}},18585:function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const d=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));d.length>0&&d[0].length>1&&d[0][0]===a&&(c=d[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t},30732:function(e,t,n){n.d(t,{j:function(){return a}});var r=n(96157),i=n(45006),o=n(46338);function s(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function a(e,t){return c.apply(this,arguments)}function c(){var e;return e=function*(e,t){var n=e.getMediaElement();t.onStart();var{currentTime:s,paused:a,playbackRate:c,poster:d}=n;a||n.pause();try{n.poster=s>0?(0,r.W9)(n,{width:n.videoWidth,height:n.videoHeight}):d}catch(t){e.emit(e.Events.Error,{type:"generic",severity:"warning",error:t,path:"dvrSeeking:takeSnapshot",state:e.getStateInfo()})}try{(0,i.a)(n),t.isIdleMode()?yield t.onDvrSeek(n):yield t.onNormalSeek(n),yield(0,o.F)(n,{playbackRate:c,poster:d}).catch((e=>t.onError(e,"warning"))),!a&&n.paused&&(yield n.play().catch((e=>t.onError(e,"warning"))))}catch(e){t.onError(e,"fatal")}finally{t.onEnd()}return n.currentTime},c=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))},c.apply(this,arguments)}},38105:function(e,t,n){n.d(t,{n:function(){return j}});var r=n(55823),i=n(58245),o=n(33612),s=n(70866),a=n(85186),c=n(9374),d=n(61542),l=n(86275),u=n(35018),h=n(82128),p=n(45006),f=n(37998),m=n(2593),v=n(18168);function g(e){switch(e){case MediaError.MEDIA_ERR_NETWORK:return"network";case MediaError.MEDIA_ERR_DECODE:case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return"media";default:return"generic"}}var y=n(86503),C=n(18430),S=n(47390),T=n(67106);function b(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function R(e,t){var n,r,{url:i,interval:o=6e4,responseHandler:s=e=>Promise.resolve(200===e.status)}=e;return(0,T.s)({interval:()=>o,callback:(n=function*(){var e=yield fetch(i);(yield s(e))&&t()},r=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){b(o,r,i,s,a,"next",e)}function a(e){b(o,r,i,s,a,"throw",e)}s(void 0)}))},function(){return r.apply(this,arguments)}),waitCallback:!0,autostart:!1})}var _=n(4556),P=n(90668);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}class w extends i.b{constructor(e,t){void 0===t&&(t={}),super(),this.stalled=!1,this.startStalledTime=0,this.cancel=()=>{this.setStalled(!1),this.resetStallDetected()},this.progressHandler=()=>{var e=this.listener.target;this.stalledBuffer&&this.stalledBuffer.start===(0,h.BC)(e.buffered)&&this.stalledBuffer.end===(0,h.Q5)(e.buffered)||this.cancel()},this.timeupdateHandler=()=>{var e=this.listener.target;e.paused&&!e.seeking&&this.setStalledDelayed.isPending?this.resetStallDetected():this.setStalledDelayed.isPending?this.stallDetected():this.listener.off("timeupdate",this.timeupdateHandler)},this.poll=()=>{var e=this.listener.target;!this.isStalled()&&e.buffered.length>0&&(e.seeking||e.readyState<=e.HAVE_CURRENT_DATA&&e.networkState===e.NETWORK_LOADING)&&this.stallDetected()},this.options=E({},t,{delay:t.delay||5e3}),this.setStalledDelayed=(0,_.s)((()=>this.setStalled(!0)),this.options.delay),this.listener=(e instanceof HTMLMediaElement?new P.H(e):e).on("waiting",this.poll).on("seeking",this.poll)}stallDetected(){var e=this.listener.target;this.stalledBuffer={start:(0,h.BC)(e.buffered),end:(0,h.Q5)(e.buffered)},this.startStalledTime=Date.now(),this.setStalledDelayed(),this.listener.on("progress",this.progressHandler).on("timeupdate",this.timeupdateHandler).on("emptied",this.cancel)}resetStallDetected(){this.stalledBuffer=void 0,this.startStalledTime=0,this.listener.off("progress",this.progressHandler),this.listener.off("timeupdate",this.timeupdateHandler),this.listener.off("emptied",this.cancel),this.setStalledDelayed.cancel()}isStalled(){return this.stalled}setStalled(e){if(this.stalled!==e)if(this.stalled=e,this.stalled)this.emit("statechanged",{stalled:this.stalled,duration:0});else{var t=Math.max(Date.now()-this.startStalledTime,0);this.emit("statechanged",{stalled:this.stalled,duration:t})}}destroy(){this.resetStallDetected(),this.listener.off("waiting",this.poll),this.listener.off("seeking",this.poll),this.stalled=!1,this.emit("destroy"),this.removeAllListeners()}[Symbol.dispose](){return this.destroy()}}var k,O=n(54548);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(null,arguments)}class L extends i.b{constructor(e,t){var n,r;void 0===t&&(t={}),super(),this.waiting=!1,this.lastTime=-1,this.startWaitingTime=0,this.startWaiting=()=>{this.waiting||this.setWaitingDelayed.isPending||(this.lastTime=this.listener.target.currentTime,this.startWaitingTime=Date.now(),this.setWaitingDelayed(),this.listener.on("timeupdate",this.timeupdateHandler),this.listener.on("pause",this.timeupdateHandler))},this.stopWaiting=()=>{this.setWaitingDelayed.cancel(),this.waiting&&(this.setWaiting(!1),this.listener.off("timeupdate",this.timeupdateHandler),this.listener.off("pause",this.timeupdateHandler))},this.timeupdateHandler=()=>{var e=this.listener.target;e.paused?e.seeking&&!this.options.stopOnPauseIfSeeking||this.stopWaiting():this.lastTime!==e.currentTime&&this.stopWaiting()},this.options=D({},t,{delay:null!=(n=t.delay)?n:500,stopOnPauseIfSeeking:null!=(r=t.stopOnPauseIfSeeking)&&r}),this.setWaitingDelayed=(0,O.G)((0,_.s)((()=>this.setWaiting(!0)),this.options.delay),(()=>{this.lastTime=this.listener.target.currentTime,this.startWaitingTime=Date.now()})),this.listener=e instanceof HTMLMediaElement?new P.H(e):e,this.listener.on("waiting",this.startWaiting),this.listener.on("seeking",this.startWaiting)}setWaiting(e){if(this.waiting!==e)if(this.waiting=e,this.waiting)this.emit("statechanged",{waiting:!0,duration:0});else{var t=Math.max(Date.now()-this.startWaitingTime,0);this.lastTime=-1,this.startWaitingTime=0,this.emit("statechanged",{waiting:!1,duration:t})}}isWaiting(){return this.waiting}destroy(){this.listener.off("timeupdate",this.timeupdateHandler),this.listener.off("pause",this.timeupdateHandler),this.listener.off("waiting",this.startWaiting),this.listener.off("seeking",this.startWaiting),this.waiting=!1,this.lastTime=-1,this.startWaitingTime=0,this.emit("destroy"),this.removeAllListeners()}[Symbol.dispose](){return this.destroy()}}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}function M(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){M(o,r,i,s,a,"next",e)}function a(e){M(o,r,i,s,a,"throw",e)}s(void 0)}))}}class j extends i.b{get Events(){return j.Events}constructor(e,t,n){super(),this.format=e,this.eventListeners=new l.g,this.cleaners=[],this.loaded=!1,this.live=!1,this.played=!1,this.actuallyPlayed=!1,this.seeked=!1,this.sourceChanging=!1,this.suspended=!1,this.reloadMediaOnReplay=!1,this.networkStateController={isOnline:()=>!0},this.name=t||this.constructor.name,this.logger=null!=n?n:(0,m.t)(this.name);var r=(0,d.d)(5);this.attachMutex=new o.e(this.name+"."+r+".",this.logger),this.detachMutex=new o.e(this.name+"."+r+".",this.logger),this.destroyMutex=new o.e(this.name+"."+r+".",this.logger),this.on(this.Events.Loaded,(()=>{this.loaded=!0,this.emit(this.Events.LiveStateChanged,this.getLiveState())}))}get networkState(){return this.networkStateController}getMediaElement(){if(!this.media)throw new f.i;return this.media}initMedia(e){this.media=e;var t=this.eventListeners.scope(this.media,"@_init");t.has("play")||this.played||t.once("play",(()=>{this.played=!0})),t.has("playing")||this.actuallyPlayed||t.once("playing",(()=>{this.actuallyPlayed=!0})),t.has("seeked")||this.seeked||t.once("seeked",(()=>{this.seeked=!0})),t.has("loadstart")||t.on("loadstart",(()=>{e.loading=!0;var n=()=>{t.off("loadeddata",n),t.off("emptied",n),t.off("error",n),delete e.loading};t.once("loadeddata",n),t.once("emptied",n),t.once("error",n),this.isLoaded()||this.isSourceChanging()||e.reloading||this.emit(this.Events.LoadStart)})),t.has("emptied")||t.on("emptied",(()=>{!this.isLoaded()||this.isSourceChanging()||e.reloading||this.detach().catch((e=>this.handleError(e,{severity:"warning",path:"detach"})))}))}attach(e,t,n){var i=this;return I((function*(){var o={stack:[],error:void 0,hasError:!1};try{(0,r.__addDisposableResource)(o,yield i.attachMutex.acquire("attach"),!1),i.media&&(yield i.detach());try{var s,a,c=null!=(s="function"==typeof(null==n?void 0:n.mediaWaitingDetection)?n.mediaWaitingDetection(i):null==n?void 0:n.mediaWaitingDetection)?s:{},d=null!=(a="function"==typeof(null==n?void 0:n.mediaStallDetection)?n.mediaStallDetection(i):null==n?void 0:n.mediaStallDetection)?a:"native"===i.playback;if(i.attachSources=t,i.attachOptions=x({},n,{mediaWaitingDetection:c,mediaStallDetection:d}),i.initMedia(e),i.waitingDetector=new L(i.eventListeners.scope(e,"@_WaitingDetector"),c).on("statechanged",(e=>{var{data:t}=e;i.emit(i.Events.WaitingStateChanged,t)})),d){var l=!0===d?void 0:d;i.stallDetector=new w(i.eventListeners.scope(e,"@_StallDetector"),l).on("statechanged",(e=>{var{data:t}=e;i.emit(i.Events.ProgressStateChanged,x({fatal:!1},t))}))}yield i.attachCore(e,i.attachSources,i.attachOptions)}catch(e){i.handleError(e,{path:"attach"})}}catch(e){o.error=e,o.hasError=!0}finally{(0,r.__disposeResources)(o)}}))()}detach(){var e=this;return I((function*(){var t={stack:[],error:void 0,hasError:!1};try{var n;(0,r.__addDisposableResource)(t,yield e.detachMutex.acquire("detach"),!1);var i=!!e.media;yield e.detachCore(),e.cleaners.forEach((e=>e())),(0,s.I)(e.cleaners),e.eventListeners.removeAllListeners(),e.waitingDetector&&(e.waitingDetector.destroy(),e.waitingDetector=void 0),e.stallDetector&&(e.stallDetector.destroy(),e.stallDetector=void 0),e.media&&((0,p.a)(e.media),e.media=void 0),e.attachSources=void 0,e.attachOptions=void 0,e.loaded=!1,e.live=!1,e.played=!1,e.actuallyPlayed=!1,e.seeked=!1,e.sourceChanging=!1,e.suspended=!1,null!=(n=e.liveChecker)&&n.stop(),e.liveChecker=void 0,i&&e.emit(e.Events.Detached)}catch(i){t.error=i,t.hasError=!0}finally{(0,r.__disposeResources)(t)}}))()}stopLoad(){}startLoad(){}isLoaded(){return this.loaded}isPlayed(){return this.played}isActuallyPlayed(){return this.actuallyPlayed}isSeeked(){return this.seeked}isWaiting(){var e;return!(null==(e=this.waitingDetector)||!e.isWaiting())}isStalled(){var e;return!(null==(e=this.stallDetector)||!e.isStalled())}isSourceChanging(){return this.sourceChanging}isPlaybackFreezed(){var e;return 0===(null==(e=this.media)?void 0:e.playbackRate)}isLive(){return this.live}isSuspended(){return this.suspended}suspend(){var e=this.getMediaElement();e.pause(),this.suspended=!0;var t=()=>this.releaseSuspended();this.eventListeners.scope(e,"@_suspend").removeAllListeners().once("play",t).once("ended",t).once("emptied",t)}releaseSuspended(){var e=this.getMediaElement();this.suspended=!1,this.eventListeners.removeAllListeners(e,"@_suspend")}seek(e){return(0,v.h)(this.getMediaElement(),e)}getCurrentTime(){var e,t;return null!=(e=null==(t=this.media)?void 0:t.currentTime)?e:0}getDuration(){return this.media?(0,u.A)(this.media)||(0,h.Q5)(this.media.seekable)||1/0:NaN}getSeekRange(){return this.media?{start:(0,h.BC)(this.media.seekable),end:(0,h.Q5)(this.media.seekable)}:{start:0,end:0}}setSourceChanging(e){this.sourceChanging!==e&&(this.sourceChanging=e,e?this.emit(this.Events.SourceChanging):this.emit(this.Events.SourceChanged))}setLive(e){var t,n=this.live;if(this.live=e,n&&!this.live&&null!=(t=this.attachOptions)&&null!=(t=t.liveRevivalCheck)&&t.url&&!this.liveChecker){var r=R(this.attachOptions.liveRevivalCheck,(()=>{r.stop(),this.media&&this.attachSources&&this.attach(this.media,this.attachSources,this.attachOptions).catch((e=>{this.handleError(e,{path:"liveChecker:attach"})}))}));this.liveChecker=r,this.liveChecker.start(),this.emit(this.Events.LiveStateChanged,this.getLiveState())}else!n&&this.live&&this.liveChecker&&(this.liveChecker.stop(),this.liveChecker=void 0,this.emit(this.Events.LiveStateChanged,this.getLiveState()))}getLiveLatency(){return 0}getLiveSeekLength(){if(!this.media||!this.live)return 0;var e=this.getSeekRange(),t=e.end-e.start;return t>0?t:0}getLiveEdgePosition(){if(!this.media||!this.live)return 0;var e=this.getSeekRange().end,t=this.getLiveLatency();return e>t?e-t:e}atLiveEdge(e,t){return void 0===e&&(e=this.getCurrentTime()),void 0===t&&(t=this.getLiveEdgePosition()),!(!this.live||!this.media||null==e)&&Math.ceil(e)>=Math.floor(t-4)}getLiveState(){var e=this.getLiveEdgePosition();return{live:this.isLive(),synced:this.atLiveEdge(this.getCurrentTime(),e),latency:this.getLiveLatency(),seekLength:this.getLiveSeekLength(),edgePosition:e}}getStateInfo(){var e=this.getDebugData();return x({name:this.name,format:this.format,playback:this.playback,loaded:this.isLoaded(),played:this.isPlayed(),actuallyPlayed:this.isActuallyPlayed(),seeked:this.isSeeked(),currentTime:this.getCurrentTime(),duration:this.getDuration(),waiting:this.isWaiting(),stalled:this.isStalled(),playbackFreezed:this.isPlaybackFreezed(),videoQuality:this.getVideoQuality(),audioTrack:this.getAudioTrack(),liveState:this.getLiveState()},e&&{debugData:e})}getDebugData(){}getStats(){var e,t,{droppedVideoFrames:n=0,totalVideoFrames:r=0}=null!=(e=null==(t=this.media)?void 0:t.getVideoPlaybackQuality())?e:{};return{videoQuality:this.getVideoQuality(),droppedVideoFrames:n,totalVideoFrames:r,estimatedBandwidth:0}}handleError(e,t){var n,r,i,o=e instanceof ErrorEvent&&e.error||e instanceof Event&&(null==(n=this.media)?void 0:n.error)||e,[s,d]=(null==t?void 0:t.type)&&[t.type,o]||o instanceof y.l&&["media",o]||o instanceof C._&&["drm",o]||o instanceof S.S&&["manifest",o]||o instanceof MediaError&&[g(o.code),(o.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED||o.code===MediaError.MEDIA_ERR_DECODE)&&new y.l((0,c.u)(o),{cause:{code:o.code,codeName:(0,a.np)(MediaError,o.code)}})||o]||["generic",o];this.emit(this.Events.Error,x({},t,{severity:null!=(r=null==t?void 0:t.severity)?r:"fatal",path:null!=(i=null==t?void 0:t.path)?i:"handleError",type:s,error:d,state:this.getStateInfo()}))}destroy(){var e=this;return I((function*(){var t={stack:[],error:void 0,hasError:!1};try{(0,r.__addDisposableResource)(t,yield e.destroyMutex.acquire("destroy"),!1),yield e.detach(),yield e.destroyCore(),e.removeAllListeners()}catch(n){t.error=n,t.hasError=!0}finally{(0,r.__disposeResources)(t)}}))()}[Symbol.asyncDispose](){return this.destroy()}}(function(e){e.LoadStart="LoadStart",e.MetadataChanged="MetadataChanged",e.Loaded="Loaded",e.Detached="Detached",e.SourceWaiting="SourceWaiting",e.SourceChanging="SourceChanging",e.SourceChanged="SourceChanged",e.QualityChanged="QualityChanged",e.AudioTrackChanged="AudioTrackChanged",e.LiveStateChanged="LiveStateChanged",e.NetworkStateChanged="NetworkStateChanged",e.WaitingStateChanged="WaitingStateChanged",e.ProgressStateChanged="ProgressStateChanged",e.Error="Error"})((k=j||(j={})).Events||(k.Events={}))},39104:function(e,t,n){n.d(t,{N:function(){return i}});var r=n(31729);function i(e){var t="string"==typeof e?JSON.parse(e):e,n=t.payload?t.payload:t,{streams:i,audio_tracks:o}=n;return 0===i.length?{qualityLevels:{},audioTracks:{}}:{qualityLevels:i.reduce(((e,t)=>{var n=(0,r.j)(t);return null!=n&&(e[n]={id:t.idx,width:t.width,height:t.height,bandwidth:t.bandwidth,frameRate:t.frameRate,codecs:t.codecs,default:!!t.default}),e}),{}),audioTracks:o.reduce(((e,t)=>(e[t.lang]={id:t.idx,language:t.lang,name:t.name,default:!!t.default},e)),{})}}},41746:function(e,t,n){n.d(t,{u:function(){return i}});var r=n(80181);function i(e,t){return"string"==typeof e?r.c$.of(new URL(e,document.location.href)).map((e=>(t.forEach(((t,n)=>e.searchParams.set(n,t))),e.toString()))).getOrElse(e):Object.entries(e).reduce(((e,n)=>{var[r,o]=n;return e[r]="string"==typeof o?i(o,t):o,e}),{})}},45006:function(e,t,n){function r(e){(e.src||e.srcObject||e.childElementCount>0)&&(URL.revokeObjectURL(e.src),e.removeAttribute("src"),e.srcObject=null,e.childElementCount>0&&Array.prototype.filter.call(e.children,(e=>e instanceof HTMLSourceElement)).forEach((t=>e.removeChild(t))),e.load())}n.d(t,{a:function(){return r}})},88913:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(16683);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}class o extends r.D{constructor(e,t){void 0===t&&(t=void 0),super(o,"Error during loading source: "+e+".",i({},t,{name:"LoadError"}))}}}}]);